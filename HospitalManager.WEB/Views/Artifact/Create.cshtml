@model HospitalManager.WEB.ViewModels.ArtifactCreateViewModel
@{
    ViewBag.Title = "Create";
}

<div class="row container" style="margin-bottom: 450px">
    <div class="col s12 m6 push-m3">
        <p class="flow-text center">New artifact</p>
        <hr/>
        @using (Html.BeginForm("Create", "Artifact", FormMethod.Post, new {enctype = "multipart/form-data"}))
        {
            <div class="row">
                <div class="input-field file-field col s12">
                    <div class="waves-effect waves-light btn">
                        <i class="material-icons">file_upload</i>
                        <input type="file" id="artifact" name="Content" required />
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" type="text" placeholder="Upload one artifact (5 MB max size)">
                    </div>
                    <h6 id="fileValidation"></h6>
                    @Html.ValidationMessageFor(model => model.Content, "", new {style = "color:red"})
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input type="text" id="details" name="description" required class="materialize-textarea"/>
                    <label for="details">Details</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s6 push-s3 center">
                    <input type="submit" id="submit" class="waves-effect waves-light btn" value="Submit"/>
                </div>
            </div>
        }
    </div>
</div>
<!-- Modal Structure -->
<div id="modal1" class="modal">
    <div class="modal-content">
        <h4>Error!</h4>
        <p>The file you try to upload is too big. (Max 5MB)</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="modal-close waves-effect waves-green btn-flat">Agree</a>
    </div>
</div>

@section scripts{
    <script>
        $(document).ready(function() {
            $('.modal').modal();
        });
        $('#artifact').bind('change', function() {
            if (this.files[0].size > 5000000) {
                $('#modal1').modal('open');
                $('#artifact').val("");
            }
        })();
    </script>
}